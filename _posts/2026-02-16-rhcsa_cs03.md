---
title: RHCSA CS03 - httpd, selinux
author: Me
date: 2026-02-16
categories:
  - 취업준비
  - 리눅스
published: false
---

## 덤프 문제

```
비표준 포트 82에서 실행 중인 웹 서버가 서비스 제공 시 문제를 겪고 있다. 다음 조건을 충족하도록 트러블슈팅을 하라 :


시스템의 웹 서버가 /var/www/html에 있는 모든 기존 HTML 파일을 제공할 수 있어야 한다. (참고: 기존 파일의 내용을 삭제하거나 수정하지 말것)

웹 서버가 포트 82로 서비스가 되도록 하라

웹 서버가 시스템이 시작될 때 자동으로 시작되어야 한다.
```

## 환경 설정

연습하기 위해 시험을 위한 환경을 가상으로 갖춰둔다.

```
# 1. httpd 설치
dnf install -y httpd

# 2. 설정이 잘못된 테스트용 파일 생성
echo "RHCSA Test Page" > /var/www/html/index.html
chcon -t user_home_t /var/www/html/index.html # 웹서버가 권한 오류로 403 Forbidden
```

### 확인
NAT 설정으로 돼있기 때문에 들어갈 수 있을 줄 알았는데(403 에러가 뜨더라도)
![image](assets/img/2026-02-16-rhcsa_cs03/IMG-20260216195014405.png)

안 들어가진다...

일단 풀이를 해보자.

## 풀이법

```
# 1. port 80 -> 82로 변경
vi /etc/httpd/conf/httpd.conf
# Listen 80 부분을 82로 변경
```

![image](assets/img/2026-02-16-rhcsa_cs03/IMG-20260216195141828.png)

```
# 2. httpd 데몬 자동 재시작 설정
systemctl enable --now httpd
```

![image](assets/img/2026-02-16-rhcsa_cs03/IMG-20260216195307404.png)
위와 같은 오류가 뜰 텐데 뜨는 게 정상이라 함.
SELinux가 82번 포트를 막고 있기 때문.

```
# 오류 로그 확인
journalctl -xeu httpd
```

![image](assets/img/2026-02-16-rhcsa_cs03/IMG-20260216195446157.png)

```
# 3. 포트 허용
semanage port -a -t http_port_t -p tcp 82

# 4. 파일 권한 복구
restorecon -v /var/www/html/index.html

# 5. 서비스 재시작
systemctl restart httpd
```


아직 접속이 안 된다. 마지막으로 방화벽 설정.

```
# 6. 방화벽 오픈
firewall-cmd --permanent --add-port=82/tcp
firewall-cmd --reload
```

이제 `http://(내 호스트 아이피):82` 로 접속이 되나 확인해보면
![image](assets/img/2026-02-16-rhcsa_cs03/IMG-20260216195828499.png)

된다 !!

### 시험장에서 설정 제대로 됐는지 검증하는 방법

```
# 1. 포트 리스닝 확인
ss -antlp | grep 82

# 2. SELinux 레이블 확인
ls -Z /var/www/html/index.html # 타입이 httpd_sys_content_t 여야 함.

# 3. 최종 접속 확인
curl http://localhost:82

```

### 시험장에서 semanage가 안 깔려있다면?

```
dnf provides semanage # 패키지 이름 검색
dnf install -y {패키지이름}
```