---
title: RHCSA CS01 - nmcli
author: Me
date: 2026-02-12 00:00:00 +0900
categories:
  - 취업준비
  - 리눅스
published: true
---


## nmcli

네트워크 설정을 확인하고 제어하는 명령어.
네트워크 관리의 표준이자 핵심.

쉽게 말해, 윈도우의 '네트워크 및 공유 센터'에 들어가서 마우스로 하던 일을 cli 환경에서 하는 것.
- 네트워크 상태 확인: 현재 랜선이 꽂혀있는지, IP는 뭔지
- 연결 설정: 고정 IP(Static)을 할당하거나 DHCP 모드로 변경
- 장치 관리: 특정 랜카드(이더넷 카드)를 켜거나 끔.
- Wi-Fi 관리: 주변 와이파이를 검색하고 비밀번호를 입력해서 연결.
- DNS 설정

크게 device와 connection 두 가지 개념으로 나뉨.

**1. 전체적인 상태 보기**
현재 시스템의 요약 상태를 보여줌.
```bash
nmcli device status
```

**2. 상세 정보 확인**
IP, 게이트웨이, DNS 등 상세 정보 확인.
```bash
nmcli device show [장치명]
```

**3. 네트워크 연결 활성화 / 비활성화**
랜카드를 꼈다 켜는 것과 같은 역할을 함.
```bash
nmcli connection up [이름]
nmcli connection down [이름]
```

**4. 고정IP 설정하기**
```bash
nmcli connection modify [이름] ipv4.addresses 192.168.1.10/24 ipv4.gateway 192.168.1.1 ipv4.method manual
nmcli connection up [이름]
```
- ipv4.addresses: ip와 서브넷마스크 설정
- ipv4.gateway: 게이트웨이 설정
- ipv4.method manual: ***(\*필수!!)*** 자동(DHCP)를 쓰지 않고 내가 직접 설정하겠다는 의미
	- ipv4.method auto일 경우 다른 설정값은 무시된다.


**5. \[이름]을 확인하는 방법**

\[이름]은 진짜 하드웨어 장치명이 아니라 연결 프로필 이름임.
그러니까 ens33이나 eth0가 아니라 그 장치에 부여된 설정 이름.(근데 보통은 둘이 똑같긴 함)

---

> [!info] down은 안 하고 up만 하는 이유
> 일단 modify만 하면 설정이 파일에만 저장된 상태라 up을 해줘야 실제로 반영된다. up만 해도 알아서 재시작이 된다.
> 만약 ssh 등으로 연결한 상태일 경우, down을 해버리면 ssh가 끊겨서 튕겨져나가는 대참사가 발생할 수 있으니 down은 절대 하지 말자.


> [!info] (여담...) ifconfig vs nmcli 
> 학부생 때 리눅스를 얕게 써본 바로 ifconfig는 종종 써봤지만 nmcli는 처음 듣는다.
> 둘의 차이점을 찾아보니 ifconfig는 구식, deprecated 된 툴이라고 한다.
> - ifconfig: 커널의 네트워크 인터페이스를 직접 건드리며, 재부팅하면 초기화됨. 일시적 설정에는 유용.
> - nmcli: NetworkManager라는 서비스(데몬)을 통해 제어하며, 설정 파일에 영구 저장됨. 따라서 복잡한 팀 구성(Teaming), 브릿지, VPN 등 통합 관리에 유용함.

---

## 덤프 문제

VMWare에서 아래 문제를 따라 해봤는데

### 문제
```
node1의 네트웍구성을 아래와 같이 변경하세요.

Host Name: node1.domain250.example.com
IPv4 address: 172.25.250.100
Subnet mask： 255.255.255.0
Gateway： 172.25.250.254
DNS： 172.25.250.254
```


### 풀이


```
# 1. 호스트네임 변경하기
hostnamectl hostname node1.domain250.example.com
# hostnamectl hostname을 쳐서 확인.

# 2. ip, subnet mask, gateway, dns 변경하기
nmcli connection show # 인터페이스 이름 확인
nmcli connection modify ens160 ipv4.method manual ipv4.addresses 172.25.250.100/24 ipv4.gateway 172.25.250.254 ipv4.dns 172.25.250.254

nmcli connection up ens160 # 재시작하여 적용


```


## 여담...

### 문제대로 설정하면 VMWare 인터넷이 안 된다??

변경한 후에 ping google.com이 먹통이었다.
이 설정 한 것 때문에 인터넷이 끊긴 거 같았는데, gateway로 날려도 Destination host unreachable이라고 뜨더라.
물론 시험환경이 아니기 때문에 신경쓰지 않아도 될지 모르지만 궁금해서 제미나이에게 물어봤다.

이 메시지의 뜻은 "니 지금 IP가 이상하다" 라는 뜻이다.
보냈는데 응답이 없다거나 수신지의 상태가 정상이 아니다, 수신지가 없다 이게 아니고
보내려다가 "어? 니 송신자 IP가 왜그럼?" 하고 리눅스가 스스로 패킷을 폐기해버리는 것이라 한다.
(내 IP는 172~ 인데 연결된 가상 스위치(VMnet8)은 192~였으니까...)

아무튼 문제위치를 확인하는 법.
1. VMWare의 네트워크 설정이 Bridged(VMnet0) 이면, 내 호스트 컴퓨터의 공유기 대역을 그대로 이어 쓴다. NAT(VMnet8)이면 VMware가 자체적으로 만든 가상 대역을 쓴다. 어느쪽이든 허용된 대역 내에서 정의돼있어야만 ip를 쓸 수 있다.
- VMware의 현재 설정 확인하는 법:
	- VMware 우측하단의 ![image](/assets/img/2026-02-12-rhcsa_cs01/Pasted%20image%2020260212201024.png) 아이콘을 누른다.
	- ![image](/assets/img/2026-02-12-rhcsa_cs01/Pasted%20image%2020260212201009.png)
	- NAT으로 돼있는 걸 확인.
		- host-only: 죽었다 깨도 외부 네트워크를 쓸 수 없음. 호스트 컴퓨터와의 통신만 가능.(RHCSA 시험장은 보통 이 상태라고 한다.)
		- NAT: 대역을 가상으로 설정할 수 있으며 호스트 컴퓨터를 통해 외부 네트워크로 나갈 수 있음. 외부에서는 VMWare인지 모르고 호스트 컴퓨터로 인식한다고 한다.
		- Bridged: 호스트 컴퓨터와 동일한 대역을 사용.
2. NAT이면 외부인터넷이 되는 환경임은 맞다. 그럼 다음으로 NAT에서 지정한 가상 범위가 내 설정값과 맞는지 확인한다.
	- Edit > Virtual Network Editor 에서 VMnet8 부분을 보면 된다. 참고로 VMnet1도 Connected로 뜰 텐데, host-only는 외부 네트워크 못 쓴다며? 나는 이 설정 하기 전까진 인터넷 잘 됐는데?? 하는 의문이 들었다. 알고보니 실제로는 VMnet8 하나의 스위치에만 연결돼있는 상태라고 한다. VMnet1은 기본값이 host-only, VMnet8은 NAT인데 현재 NAT이다. 역으로 현재 NAT에 연결돼있다는 건 활성화 된 스위치 중 정확히 VMnet8에 연결돼있다는 뜻인 것이다. 그러니 VMnet8의 설정을 봐야 한다.
	- ![image](/assets/img/2026-02-12-rhcsa_cs01/Pasted%20image%2020260212201449.png)
	- ![image](/assets/img/2026-02-12-rhcsa_cs01/Pasted%20image%2020260212201523.png)
	- 여기가 문제였다. (스샷은 내가 고친 후라서 옳은 값임)
	- gateway와 Subnet IP 부분을 시험에 맞게 고쳐두었다. 그럼 이제 이 컴퓨터의 대역폭은 172.25.250.1 ~ 172.25.250.254가 되고 gateway도 172.25.250.254에 실제로 위치하게 되어, 내가 해둔 설정이 통하게 된다.
	- 참고로 왜 gateway랑 dns서버가 똑같이 172.25.250.254인가 궁금했는데 그냥 통상적으로 그렇게 쓴다고 하더라.



---

### nmtui와 nmcli의 차이, 비슷해보이는 명령어들의 미세한 차이들.

2026-02-13 추가.
리눅스 마스터 2급을 병행 준비 중인데, 여기선 네트워크 설정을 nmtui로 하더라.
직접 실행해보니
![image](assets/img/2026-02-12-rhcsa_cs01/IMG-20260213195039229.png)
굉장히 친절한 gui가 반겨준다...
이걸로 설정하면 안 되는 건가?
> 제미나이 피셜... rhcsa 환경에서 gui를 못 쓰게 하는 건 아니지만 혹시라도 gui가 깨져 보일 가능성이 있으니 nmcli도 외워가라고 한다. 그리고 한 번 설정할 때야 gui가 편하지만 실무에서는 보통 자동화 스크립트로 만들어서 쓰니 nmcli를 많이 쓰는듯.

그리고 솔직히 기능이 똑같아보이는

(ip 상태 확인할 때)
- ip addr
- ifconfig
- nmcli


(라우팅 테이블 확인할 때.)
- netstat -rn
- route
- ip route

얘네들의 차이점은, 구식도구(ifconfig, route, netstat)와 신식통합도구(ip addr, ip route), 그리고 NetworkManager를 경유하는 관리층(nmcli)의 차이라고 하더라.

nmcli는 거짓말을 할 수 있는데 ip는 현재 상태를 그대로 보여주기 때문에 신뢰도가 높다고 한다.
뭔가.. 디스크에 저장된 값과 메모리에 실제로 올라간 값의 차이라고 생각하면 되려나?

그러니까 리눅스 마스터처럼 좀 오래된 시험은 구식 도구도 외워야 하고, rhcsa처럼 '어쨌든 결과에만 도달하면 되는' 시험과 실무를 위해선 최신 명령어로 외워두는 게 필요한 것 같다.
